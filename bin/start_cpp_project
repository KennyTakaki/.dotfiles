#!/bin/bash
echo "==========specify project name...============="
read prj
echo "project name is "${prj}
echo "==========specify first lib name...==========="
read libname
echo "first lib prefix is "${libname}
echo "==========specify first app name...==========="
read appname
echo "first app prefix is "${appname}

incld='#include "'${prj}/${libname}'.hpp"'

mkdir "./"${prj}

mkdir "./"${prj}"/build"
touch ${prj}"/build/compile_commands.json"
ln -s "./build/compile_commands.json" ${prj}"/compile_commands.json"

touch ${prj}"/compile_flags.txt"
echo  "-I./include" > ${prj}"/compile_flags.txt"

touch ${prj}"/.gitignore"
echo "build" > ${prj}"/.gitignore"
echo "docs/out" > ${prj}"/.gitignore"
echo "docs/latex" > ${prj}"/.gitignore"
touch ${prj}"/README.md"
echo "This project was made by start_cpp_project" > ${prj}/"README.md"
touch ${prj}"/LICENCE.md"
echo "Created By takaki" > ${prj}"/LICENCE.md"
touch ${prj}"/CMakeLists.txt"

mkdir ${prj}"/cmake"
touch ${prj}"/cmake/CMakeLists.txt"
touch ${prj}"/cmake/FindSomeLib.cmake"
touch ${prj}"/cmake/something_else.cmake"

mkdir -p ${prj}"/include/"${prj}
touch ${prj}"/include/"${prj}"/"${libname}".hpp"

mkdir ${prj}"/src"
touch ${prj}"/src/"${libname}".cpp"
echo  ${incld} > ${prj}"/src/"${libname}".cpp"
touch ${prj}"/src/CMakeLists.txt"

mkdir ${prj}"/apps"
touch ${prj}"/apps/CMakeLists.txt"
touch ${prj}"/apps/"${appname}".cpp"
echo  ${incld} > ${prj}"/apps/"${appname}".cpp"

mkdir ${prj}"/tests"
touch ${prj}"/tests/CMakeLists.txt"
touch ${prj}"/tests/testlib.cpp"

mkdir ${prj}"/docs"
touch ${prj}"/docs/CMakeLists.txt"
touch ${prj}"/docs/mainpage.txt"
cd ${prj}/docs && doxygen -g && mkdir out && cd ../../

mkdir -p ${prj}"/extern/googletest"

mkdir ${prj}"/scripts"
touch ${prj}"/scripts/helper.py"

echo "==========created default project tree==========="
tree ${prj}
echo "================================================="

# To Do
# write some doxygen staff
